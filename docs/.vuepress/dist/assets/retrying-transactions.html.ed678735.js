import{_ as h,r as o,o as p,c as u,a as n,b as s,w as c,F as d,d as t,e}from"./app.1656ed2a.js";var g="/assets/tx-journey.dd6310be.png",k="/assets/tpu-jito-labs.8bb32fb6.png",_="/assets/dropped-via-rpc-pool.8d1ce9af.png",b="/assets/dropped-minority-fork-pre-process.555653e1.png",m="/assets/dropped-minority-fork-post-process.48c3c955.png";const f={},y=n("h1",{id:"thu-lai-transaction",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#thu-lai-transaction","aria-hidden":"true"},"#"),t(" Th\u1EED l\u1EA1i Transaction")],-1),v=t("Trong m\u1ED9t v\xE0i t\xEDnh hu\u1ED1ng, m\u1ED9t Transaction tr\xF4ng c\xF3 v\u1EC3 h\u1EE3p l\u1EC7 c\xF3 th\u1EC3 b\u1ECB h\u1EBFt h\u1EA1n ngay tr\u01B0\u1EDBc khi \u0111\u01B0\u1EE3c ch\u1EA5p nh\u1EADn (th\xEAm v\xE0o block). \u0110i\u1EC1u \u0111\xF3 th\u01B0\u1EDDng di\u1EC5n ra nh\u1EA5t l\xE0 khi m\u1EA1ng l\u01B0\u1EDBi b\u1ECB ngh\u1EBDn v\xE0 m\u1ED9t n\u1ED1t RPC kh\xF4ng th\u1EC3 truy\u1EC1n Transaction \u0111\u1EBFn "),T={href:"https://docs.solana.com/terminology#leader",target:"_blank",rel:"noopener noreferrer"},w=t("leader"),x=t(". D\u01B0\u1EDBi g\xF3c \u0111\u1ED9 ng\u01B0\u1EDDi d\xF9ng, b\u1EA1n c\xF3 th\u1EC3 nh\u1EADn ra tr\u01B0\u1EDDng h\u1EE3p n\xE0y khi Transaction bi\u1EBFn m\u1EA5t ho\xE0n to\xE0n. Trong khi c\xE1c n\u1ED1t RPC \u0111\u01B0\u1EE3c trang b\u1ECB m\u1ED9t thu\u1EADt to\xE1n lan truy\u1EC1n chung, \u1EE9ng d\u1EE5ng c\u1EE7a c\xE1c l\u1EADp tr\xECnh vi\xEAn v\u1EABn c\xF3 kh\u1EA3 n\u0103ng ph\xE1t tri\u1EC3n c\xE1c lu\u1EADn l\xFD lan truy\u1EC1n tu\xFD ch\u1EC9nh."),P=e('<h2 id="co-the-ban-chua-biet" tabindex="-1"><a class="header-anchor" href="#co-the-ban-chua-biet" aria-hidden="true">#</a> C\xF3 th\u1EC3 b\u1EA1n ch\u01B0a bi\u1EBFt</h2><div class="custom-container tip"><p class="custom-container-title">Nh\u1EEFng \u0111i\u1EC1u c\xF3 th\u1EC3 b\u1EA1n ch\u01B0a bi\u1EBFt</p><ul><li>C\xE1c n\u1ED1t RPC s\u1EBD th\u1EED lan truy\u1EC1n l\u1EA1i Transaction khi s\u1EED d\u1EE5ng m\u1ED9t thu\u1EADt to\xE1n chung</li><li>\u1EE8ng d\u1EE5ng ri\xEAng c\xF3 th\u1EC3 hi\u1EC7n th\u1EF1c c\xE1c lu\u1EADn l\xFD lan truy\u1EC1n tu\u1EF3 ch\u1EC9nh</li><li>L\u1EADp tr\xECnh vi\xEAn n\xEAn hi\u1EC3u r\xF5 tham s\u1ED1 <code>maxRetries</code> c\u1EE7a ph\u01B0\u01A1ng th\u1EE9c <code>sendTransaction</code> trong JSON-RPC.</li><li>L\u1EADp tr\xECnh vi\xEAn n\xEAn k\xEDch ho\u1EA1t preflight \u0111\u1EC3 ki\u1EC3m tra c\xE1c t\xECnh hu\u1ED1ng l\u1ED7i tr\u01B0\u1EDBc khi g\u1EEDi Transaction \u0111i</li><li>Tr\u01B0\u1EDBc khi k\xFD l\u1EA1i b\u1EA5t k\u1EF3 m\u1ED9t Transaction n\xE0o, l\xE0 <strong>r\u1EA5t quan tr\u1ECDng</strong> khi \u0111\u1EA3m b\u1EA3o r\u1EB1ng blockhash c\u1EE7a Transaction \u0111\xE3 h\u1EBFt h\u1EA1n</li></ul></div><h2 id="hanh-trinh-cua-mot-transaction" tabindex="-1"><a class="header-anchor" href="#hanh-trinh-cua-mot-transaction" aria-hidden="true">#</a> H\xE0nh tr\xECnh c\u1EE7a m\u1ED9t Transaction</h2><h3 id="lam-the-nao-\u0111e-nguoi-dung-gui-transactions" tabindex="-1"><a class="header-anchor" href="#lam-the-nao-\u0111e-nguoi-dung-gui-transactions" aria-hidden="true">#</a> L\xE0m th\u1EBF n\xE0o \u0111\u1EC3 ng\u01B0\u1EDDi d\xF9ng g\u1EEDi Transactions</h3><p>Trong Solana, kh\xF4ng t\u1ED3n t\u1EA1i kh\xE1i ni\u1EC7m mempool. T\u1EA5t c\u1EA3 c\xE1c Transaction, d\xF9 l\xE0 \u0111\u01B0\u1EE3c t\u1EA1o n\xEAn t\u1EEB c\xE1c Program hay l\xE0 t\u1EEB ng\u01B0\u1EDDi d\xF9ng, \u0111\u1EC1u \u0111\u01B0\u1EE3c \u0111i\u1EC1u h\u01B0\u1EDBng hi\u1EC7u qu\u1EA3 \u0111\u1EBFn c\xE1c leader \u0111\u1EC3 h\u1ECD c\xF3 th\u1EC3 x\u1EED l\xFD v\xE0 ghi nh\u1EADn ch\xFAng v\xE0o block. C\xF3 2 c\xE1ch m\xE0 m\u1ED9t Transaction c\xF3 th\u1EC3 d\u01B0\u1EE3c g\u1EEDi \u0111\u1EBFn c\xE1c leader:</p>',5),C=t("U\u1EF7 quy\u1EC1n cho c\xE1c m\xE1y ch\u1EE7 RPC b\u1EB1ng ph\u01B0\u01A1ng th\u1EE9c "),R={href:"https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction",target:"_blank",rel:"noopener noreferrer"},L=t("sendTransaction"),S=t(" trong JSON-RPC."),B=t("G\u1EEDi tr\u1EF1c ti\u1EBFp \u0111\u1EBFn c\xE1c leader th\xF4ng qua "),q={href:"https://docs.rs/solana-client/1.7.3/solana_client/tpu_client/index.html",target:"_blank",rel:"noopener noreferrer"},N=t("TPU Client"),K=n("p",null,"Ph\u1EA7n l\u1EDBn ng\u01B0\u1EDDi d\xF9ng s\u1EBD g\u1EEDi Transaction th\xF4ng qua m\xE1y ch\u1EE7 RPC. KHi m\u1ED9t ng\u01B0\u1EDDi d\xF9ng g\u1EEDi Transaction \u0111i, n\u1ED1t RPC s\u1EBD ti\u1EBFp nh\u1EADn v\xE0 c\u1ED1 g\u1EAFng truy\u1EC1n l\u1EA7n l\u01B0\u1EE3t c\xE1c Transaction \u0111\u1EBFn leader hi\u1EC7n t\u1EA1i c\u0169ng nh\u01B0 leader ti\u1EBFp theo. Cho \u0111\u1EBFn khi Transaction \u0111\u01B0\u1EE3c x\u1EED l\xFD b\u1EDFi m\u1ED9t leader, s\u1EBD kh\xF4ng t\u1ED3n t\u1EA1i b\u1EA5t k\u1EF3 b\u1EA3n sao n\xE0o c\u1EE7a Transaction \u0111\u01B0\u1EE3c l\u01B0u tr\u1EEF ngo\u1EA1i tr\u1EEB ng\u01B0\u1EDDi d\xF9ng v\xE0 c\xE1c n\u1ED1t RPC trung chuy\u1EC3n. Trong tr\u01B0\u1EDDng h\u1EE3p TPU Client, qu\xE1 tr\xECnh lan truy\u1EC1n v\xE0 \u0111i\u1EC1u h\u01B0\u1EDBng \u0111\u1EBFn leader s\u1EBD \u0111\u01B0\u1EE3c x\u1EED l\xFD to\xE0n b\u1ED9 b\u1EDFi ng\u01B0\u1EDDi d\xF9ng.",-1),M=n("p",null,[n("img",{src:g,alt:"Transaction Journey"})],-1),j=n("h3",{id:"lam-the-nao-\u0111e-cac-not-rpc-lan-truyen-transaction",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#lam-the-nao-\u0111e-cac-not-rpc-lan-truyen-transaction","aria-hidden":"true"},"#"),t(" L\xE0m th\u1EBF n\xE0o \u0111\u1EC3 c\xE1c n\u1ED1t RPC lan truy\u1EC1n Transaction")],-1),H=t("Ngay sau khi m\u1ED9t n\u1ED1t RPC ti\u1EBFp nh\u1EADn Transaction th\xF4ng qu\xE1 "),V=n("code",null,"sendTransaction",-1),U=t(", n\xF3 s\u1EBD chuy\u1EC3n Transaction \u0111\xF3 th\xE0nh m\u1ED9t g\xF3i tin "),A={href:"https://en.wikipedia.org/wiki/User_Datagram_Protocol",target:"_blank",rel:"noopener noreferrer"},D=t("UDP"),F=t(" tr\u01B0\u1EDBc khi truy\u1EC1n \u0111\u1EBFn c\xE1c leader th\xEDch h\u1EE3p. UDP cho ph\xE9p validator c\xF3 th\u1EC3 giao ti\u1EBFp nhanh ch\xF3ng v\u1EDBi nhau, nh\u01B0ng kh\xF4ng \u0111\u1EA3m b\u1EA3o g\xF3i tin c\xF3 th\u1EC3 ch\u1EAFc ch\u1EAFn \u0111\u01B0\u1EE3c chuy\u1EC3n \u0111i \u0111\xFAng h\u01B0\u1EDBng."),E=t("B\u1EDFi v\xEC l\u1ECBch tr\xECnh c\u1EE7a c\xE1c leader trong Solana l\xE0 bi\u1EBFt tr\u01B0\u1EDBc cho m\u1ED7i "),J={href:"https://docs.solana.com/terminology#epoch",target:"_blank",rel:"noopener noreferrer"},O=t("epoch"),I=t(" (~2 ng\xE0y), m\u1ED9t n\u1ED1t RPC will lan truy\u1EC1n Transaction c\u1EE7a n\xF3 tr\u1EF1c ti\u1EBFp \u0111\u1EBFn leader hi\u1EC7n t\u1EA1i c\u0169ng nh\u01B0 ti\u1EBFp sau. \u0110i\u1EC1u n\xE0y tr\xE1i ng\u01B0\u1EE3c v\u1EDBi c\xE1c giao th\u1EE9c gossip kh\xE1c, v\xED d\u1EE5 nh\u01B0 Ethereum truy\u1EC1n Transaction m\u1ED9t c\xE1ch ng\u1EABu nhi\xEAn v\xE0 ph\u1EE7 kh\u1EAFp tr\xEAn to\xE0n m\u1EA1ng. M\u1EB7c \u0111\u1ECBnh, c\xE1c n\u1ED1t RPC s\u1EBD th\u1EED chuy\u1EC3n Transaction \u0111\u1EBFn c\xE1c leader c\u1EE9 m\u1ED7i 2 gi\xE2y cho \u0111\u1EC3 khi, ho\u1EB7c Transaction th\xE0nh c\xF4ng, ho\u1EB7c blockhash c\u1EE7a Transaction b\u1ECB qu\xE1 h\u1EA1n (150 blocks ho\u1EB7c ~1 ph\xFAt 19 gi\xE2y t\u1EA1i th\u1EDDi \u0111i\u1EC3m vi\u1EBFt b\xE0i). N\u1EBFu h\xE0ng \u0111\u1EE3i c\xE1c Transaction c\u1EA7n \u0111\u01B0\u1EE3c truy\u1EC1n \u0111i l\u1EDBn h\u01A1n "),z={href:"https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/send-transaction-service/src/send_transaction_service.rs#L20",target:"_blank",rel:"noopener noreferrer"},G=t("10,000 transactions"),X=t(", c\xE1c Transaction \u0111\u1EBFn sau s\u1EBD b\u1ECB t\u1EEB ch\u1ED1i. \u0110\u1EC3 \u0111i\u1EC1u ch\u1EC9nh c\xE0i \u0111\u1EB7t m\u1EB7c \u0111\u1ECBnh, tham kh\u1EA3o c\xE1c tham s\u1ED1 cho c\xE2u l\u1EC7nh "),W={href:"https://github.com/solana-labs/solana/blob/bfbbc53dac93b3a5c6be9b4b65f679fdb13e41d9/validator/src/main.rs#L1172",target:"_blank",rel:"noopener noreferrer"},Y=t("t\u1EA1i \u0111\xE2y"),Q=t("."),Z=t("Khi m\u1ED9t n\u1ED1t RPC lan truy\u1EC1n m\u1ED9t Transaction, n\xF3 s\u1EBD c\u1ED1 g\u1EAFng chuy\u1EC3n Transaction \u0111\xF3 \u0111\u1EC3 "),$={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/validator.rs#L867",target:"_blank",rel:"noopener noreferrer"},nn=t("Transaction Processing Unit (TPU)"),tn=t(" c\u1EE7a m\u1ED9t leader."),sn=n("p",null,"TPU x\u1EED l\xFD c\xE1c Transaction trong 5 pha ri\xEAng bi\u1EC7t:",-1),an={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/fetch_stage.rs#L21",target:"_blank",rel:"noopener noreferrer"},on=t("Fetch Stage"),cn={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L91",target:"_blank",rel:"noopener noreferrer"},en=t("SigVerify Stage"),rn={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/banking_stage.rs#L249",target:"_blank",rel:"noopener noreferrer"},ln=t("Banking Stage"),hn={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/poh/src/poh_service.rs",target:"_blank",rel:"noopener noreferrer"},pn=t("Proof of History Service"),un={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/core/src/tpu.rs#L136",target:"_blank",rel:"noopener noreferrer"},dn=t("Broadcast Stage"),gn=n("p",null,[n("img",{src:k,alt:"TPU Overview"}),n("small",{style:{display:"block","text-align":"center"}},"H\xECnh \u1EA3nh \u0111\u01B0\u1EE3c cho ph\xE9p b\u1EDFi Jito Labs")],-1),kn=n("p",null,"Trong 5 pha n\xE0y, Fetch Stage ch\u1ECBu tr\xE1ch nhi\u1EC7m cho vi\u1EC7c ti\u1EBFp nh\u1EADn Transaction. Trong ph\u1EA1m vi Fetch Stage, validator s\u1EBD ph\xE2n o\u1EA1i c\xE1c Transaction m\u1EDBi \u0111\u1EBFn d\u1EF1a theo 3 c\u1ED5ng:",-1),_n={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L27",target:"_blank",rel:"noopener noreferrer"},bn=t("tpu"),mn=t(" x\u1EED l\xFD c\xE1c Transaction b\xECnh th\u01B0\u1EDDng nh\u01B0 l\xE0 chuy\u1EC3n token, t\u1EA1o NFT, v\xE0 c\xE1c ch\u1EC9 th\u1ECB cho c\xE1c Program"),fn={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L31",target:"_blank",rel:"noopener noreferrer"},yn=t("tpu_vote"),vn=t(" t\u1EADp trung ho\xE0n to\xE0n v\xE0o Transaction b\u1ECF phi\u1EBFu"),Tn={href:"https://github.com/solana-labs/solana/blob/cd6f931223181d5a1d47cba64e857785a175a760/gossip/src/contact_info.rs#L29",target:"_blank",rel:"noopener noreferrer"},wn=t("tpu_forwards"),xn=t(" \u0111i\u1EC1u h\u01B0\u1EDBng c\xE1c g\xF3i tin ch\u01B0a x\u1EED l\xFD \u0111\u1EBFn c\xE1c leader ti\u1EBFp theo n\u1EBFu leader hi\u1EC7n t\u1EA1i kh\xF4ng \u0111\u1EE7 kh\u1EA3 n\u0103ng x\u1EED l\xFD h\u1EBFt t\u1EA5t c\u1EA3 c\xE1c Transaction"),Pn=t("Chi ti\u1EBFt h\u01A1n v\u1EC1 TPU, vui l\xF2ng tham kh\u1EA3o "),Cn={href:"https://jito-labs.medium.com/solana-validator-101-transaction-processing-90bcdc271143",target:"_blank",rel:"noopener noreferrer"},Rn=t("b\xE0i vi\u1EBFt r\u1EA5t xu\u1EA5t s\u1EAFc c\u1EE7a Jito Labs"),Ln=t("."),Sn=n("h2",{id:"khi-nao-cac-transaction-bi-huy",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#khi-nao-cac-transaction-bi-huy","aria-hidden":"true"},"#"),t(" Khi n\xE0o c\xE1c Transaction b\u1ECB hu\u1EF7")],-1),Bn=n("p",null,"Xuy\xEAn su\u1ED1t h\xE0nh tr\xECnh c\u1EE7a m\u1ED9t Transaction, lu\xF4n c\xF3 m\u1ED9t v\xE0i t\xECnh hu\u1ED1ng Transaction \u0111\xF3 c\xF3 th\u1EC3 b\u1ECB l\xE0m m\u1EA5t m\u1ED9t c\xE1ch t\xECnh c\u1EDD do m\u1EA1ng.",-1),qn=n("h3",{id:"truoc-khi-transaction-\u0111uoc-xu-ly",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#truoc-khi-transaction-\u0111uoc-xu-ly","aria-hidden":"true"},"#"),t(" Tr\u01B0\u1EDBc khi Transaction \u0111\u01B0\u1EE3c x\u1EED l\xFD")],-1),Nn=t("N\u1EBFu m\u1EA1ng l\xE0m m\u1EA5t m\u1ED9t Transaction, kh\u1EA3 n\u0103ng g\u1EA7n nh\u01B0 n\xF3 s\u1EBD b\u1ECB hu\u1EF9 tr\u01B0\u1EDBc khi \u0111\u01B0\u1EE3c x\u1EED l\xFD b\u1EDFi m\u1ED9t leader. "),Kn={href:"https://en.wikipedia.org/wiki/Packet_loss",target:"_blank",rel:"noopener noreferrer"},Mn=t("M\u1EA5t g\xF3i tin"),jn=t(" trong UDP l\xE0 m\u1ED9t nguy\xEAn nh\xE2n \u0111\u01A1n gi\u1EA3n nh\u1EA5t d\u1EABn \u0111\u1EBFn t\xECnh tr\u1EA1ng tr\xEAn. Trong th\u1EDDi gian m\u1EA1ng ngh\u1EBDn, c\xE1c validator c\xF3 th\u1EC3 \u0111\xE3 b\u1ECB qu\xE1 t\u1EA3i v\u1EDBi s\u1ED1 l\u01B0\u1EE3ng kh\u1ED5ng l\u1ED3 c\xE1c Transaction c\u1EA7n x\u1EED l\xFD. Trong khi c\xE1c validator \u0111\u01B0\u1EE3c trang b\u1ECB "),Hn=n("code",null,"tpu_forwards",-1),Vn=t(" \u0111\u1EC3 \u0111i\u1EC1u h\u01B0\u1EDBng c\xE1c Transaction \u0111\u1EBFn sau, th\xEC v\u1EABn lu\xF4n c\xF3 m\u1ED9t gi\u1EDBi h\u1EA1n s\u1ED1 l\u01B0\u1EE3ng c\xE1c g\xF3i tin "),Un={href:"https://github.com/solana-labs/solana/blob/master/core/src/banking_stage.rs#L389",target:"_blank",rel:"noopener noreferrer"},An=t("\u0111\u01B0\u1EE3c \u0111i\u1EC1u h\u01B0\u1EDBng"),Dn=t(". H\u01A1n n\u1EEFa, m\u1ED7i l\u1EA7n \u0111i\u1EC1u h\u01B0\u1EDBng s\u1EBD b\u1ECB gi\u1EDBi h\u1EA1n trong ph\u1EA1m v\u1ECB m\u1ED9t \u0111\u01A1n v\u1ECB k\u1EBFt n\u1ED1i (hop) gi\u1EEFa c\xE1c validator. B\u1EDFi v\u1EADy m\xE0 c\xE1c Transaction \u0111\u01B0\u1EE3c nh\u1EADn th\xF4ng qua c\u1ED5ng "),Fn=n("code",null,"tpu_forwards",-1),En=t(" s\u1EBD kh\xF4ng bao gi\u1EDD \u0111\u01B0\u1EE3c \u0111i\u1EC1u h\u01B0\u1EDBng th\xEAm cho c\xE1c validator kh\xE1c."),Jn=t("Ngo\xE0i ra, c\u0169ng c\xF3 2 l\xFD do \u0111\u01B0\u1EE3c ghi nh\u1EADn kh\xE1c d\u1EABn \u0111\u1EBFn m\u1ED9t Transaction b\u1ECB \u0111\xE1nh m\u1EA5t tr\u01B0\u1EDBc khi n\xF3 \u0111\u01B0\u1EE3c x\u1EED l\xFD. Tr\u01B0\u1EDDng h\u1EE3p \u0111\u1EA7u ti\xEAn l\xE0 nh\u1EEFng Transaction \u0111\u01B0\u1EE3c g\u1EEDi t\u1EEB m\u1ED9t RPC pool. Thi tho\u1EA3ng, m\u1ED9t ph\u1EA7n c\u1EE7a RPC pool c\xF3 th\u1EC3 \u0111i nhanh h\u01A1n \u0111\xE1ng k\u1EC3 ph\u1EA7n c\xF2n l\u1EA1i c\u1EE7a pool. V\u1EA5n \u0111\u1EC1 n\xE0y th\u01B0\u1EDDng g\u1EB7p khi c\xE1c n\u1ED1t trong pool c\u1EA7n l\xE0m vi\u1EC7c k\u1EBFt h\u1EE3p c\xF9ng nhau. Trong v\xED d\u1EE5 n\xE0y, "),On={href:"https://docs.solana.com/developing/programming-model/transactions#recent-blockhash",target:"_blank",rel:"noopener noreferrer"},In=t("recentBlockhash"),zn=t(" c\u1EE7a Transaction \u0111\u01B0\u1EE3c truy v\u1EA5n t\u1EEB ph\u1EA7n \u0111i nhanh h\u01A1n c\u1EE7a pool (M\xE1y ch\u1EE7 A). Khi Transaction \u0111\u01B0\u1EE3c g\u1EEDi \u0111\u1EBFn ph\u1EA7n \u0111i ch\u1EADm c\u1EE7a pool (M\xE1y ch\u1EE7 B), c\xE1c n\u1ED1t n\xE0y s\u1EBD kh\xF4ng nh\u1EADn ra blockhash v\xE0 s\u1EBD v\xF4 hi\u1EC7u ho\xE1 Transaction \u0111\xF3. Ch\xFAng ta c\xF3 th\u1EC3 ph\xE1t hi\u1EC7n l\u1ED7i n\xE0y, n\u1EBFu l\u1EADp tr\xECnh vi\xEAn k\xEDch ho\u1EA1t "),Gn={href:"https://docs.solana.com/developing/clients/jsonrpc-api#sendtransaction",target:"_blank",rel:"noopener noreferrer"},Xn=t("vi\u1EC7c ki\u1EC3m tra preflight"),Wn=t(" l\xFAc g\u1ECDi "),Yn=n("code",null,"sendTransaction",-1),Qn=t("."),Zn=e('<p><img src="'+_+'" alt="Dropped via RPC Pool"></p><p>M\u1ED9t m\u1EA1ng b\u1ECB r\u1EBD nh\xE1nh t\u1EA1m th\u1EDDi c\u0169ng c\xF3 th\u1EC3 d\u1EABn \u0111\u1EBFn Transaction kh\xF4ng h\u1EE3p l\u1EC7. N\u1EBFu m\u1ED9t validator b\u1ECB ch\u1EADm trong qu\xE1 tr\xECnh trung chuy\u1EC3n c\xE1c block t\u1EA1i pha Banking Stage, r\u1EA5t c\xF3 th\u1EC3 n\xF3 s\u1EBD r\u1EBD sang m\u1ED9t nh\xE1nh thi\u1EC3u s\u1ED1. Khi m\u1ED9t Transaction \u0111\u01B0\u1EE3c t\u1EA1o, c\xF3 kh\u1EA3 n\u0103ng Transaction tham chi\u1EBFu \u0111\u1EBFn <code>recentBlockhash</code> m\xE0 ch\u1EC9 h\u1EE3p l\xEAn tr\xEAn nh\xE1nh thi\u1EC3u s\u1ED1. Sau khi Transaction n\xE0y \u0111\u01B0\u1EE3c g\u1EEDi \u0111i, m\u1EA1ng l\u01B0\u1EDBi c\xF3 th\u1EC3 nh\u1EA3y v\u1EC1 nh\xE1nh ch\xEDnh t\u1EEB nh\xE1nh thi\u1EC3u s\u1ED1 tr\u01B0\u1EDBc khi Transaction \u0111\u01B0\u1EE3c x\u1EED l\xFD. Trong t\xECnh hu\u1ED1ng \u0111\xF3, Transaction s\u1EBD kh\xF4ng h\u1EE3p l\u1EC7 v\xEC m\u1EA1ng kh\xF4ng th\u1EC3 t\xECm th\u1EA5y blockhash.</p><p><img src="'+b+'" alt="Dropped due to Minority Fork (Before Processed)"></p><h3 id="sau-khi-transaction-\u0111uoc-xu-ly-nhunh-truoc-khi-\u0111uoc-ghi-vao-block" tabindex="-1"><a class="header-anchor" href="#sau-khi-transaction-\u0111uoc-xu-ly-nhunh-truoc-khi-\u0111uoc-ghi-vao-block" aria-hidden="true">#</a> Sau khi Transaction \u0111\u01B0\u1EE3c x\u1EED l\xFD nh\u01B0nh tr\u01B0\u1EDBc khi \u0111\u01B0\u1EE3c ghi v\xE0o block</h3><p>Trong tr\u01B0\u1EDDng h\u1EE3p m\u1ED9t Transaction tham chi\u1EBFu <code>recentBlockhash</code> t\u1EEB m\u1ED9t nh\xE1nh thi\u1EC3u s\u1ED1, n\xF3 v\u1EABn c\xF3 th\u1EC3 \u0111\u01B0\u1EE3c x\u1EED l\xFD b\xEDnh th\u01B0\u1EDDng. Tuy nhi\xEAn trong tr\u01B0\u1EDDng h\u1EE3p \u0111\xF3, n\xF3 ch\u1EC9 \u0111\u01B0\u1EE3c ti\u1EBFp nh\u1EADn b\u1EDFi leader tr\xEAn nh\xE1nh thi\u1EC3u s\u1ED1. Khi leader n\xE0y c\u1ED1 g\u1EAFng chia s\u1EBB nh\u1EEFng Transaction m\xE0 n\xF3 \u0111\xE3 x\u1EED l\xFD v\u1EDBi ph\u1EA7n c\xF2n l\u1EA1i c\u1EE7a m\u1EA1ng, l\u1ED7i \u0111\u1ED3ng thu\u1EADn s\u1EBD x\u1EA3y ra v\u1EDBi ph\u1EA7n c\u1ED3ng c\xE1c validator kh\xE1c \u0111ang duy tr\xEC tr\xEAn nh\xE1nh ch\xEDnh v\xE0 kh\xF4ng h\u1EC1 nh\u1EADn ra nh\xE1nh thi\u1EC3u s\u1ED1. L\xFAc \u0111\xF3, Transaction s\u1EBD b\u1ECB xem l\xE0 kh\xF4ng h\u1EE3p l\xEAn tr\u01B0\u1EDBc khi \u0111\u01B0\u1EE3c \u0111\xF3ng v\xE0o block.</p><p><img src="'+m+'" alt="Dropped due to Minority Fork (After Processed)"></p><h2 id="xu-tri-voi-transaction-bi-huy" tabindex="-1"><a class="header-anchor" href="#xu-tri-voi-transaction-bi-huy" aria-hidden="true">#</a> X\u1EED tr\xED v\u1EDBi Transaction b\u1ECB hu\u1EF7</h2><p>Trong khi c\xE1c n\u1ED1t RPC s\u1EBD c\u1ED1 g\u1EAFng lan truy\u1EC1n c\xE1c Transaction, thu\u1EADt to\xE1n \u0111\u01B0\u1EE3c d\xF9ng th\u01B0\u1EDDng ch\u1EC9 \u0111\xE1p \u1EE9ng c\xE1c nhu c\u1EA7u ph\u1ED5 bi\u1EBFn v\xE0 kh\xF4ng t\u01B0\u01A1ng th\xEDch v\u1EDBi c\xE1c nhu c\u1EA7u \u0111\u1EB7t bi\u1EC7t. \u0110\u1EC3 d\u1EF1 ph\xF2ng trong t\xECnh hu\u1ED1ng m\u1EA1ng ngh\u1EBDn, c\xE1c l\u1EADp tr\xECnh vi\xEAn s\u1EBD ph\u1EA3i tu\u1EF3 ch\u1EC9nh thu\u1EADt to\xE1n lan truy\u1EC1n trong \u1EE9ng d\u1EE5ng c\u1EE7a h\u1ECD.</p><h3 id="nghien-cuu-sendtransaction" tabindex="-1"><a class="header-anchor" href="#nghien-cuu-sendtransaction" aria-hidden="true">#</a> Nghi\xEAn c\u1EE9u sendTransaction</h3><p>Khi c\u1EA7n g\u1EEDi Transaction, ph\u01B0\u01A1ng th\u1EE9c <code>sendTransaction</code> trong RPC l\xE0 c\xF4ng c\u1EE5 c\u01A1 b\u1EA3n nh\u1EA5t s\u1EB5n c\xF3 cho l\u1EADp tr\xECnh vi\xEAn. <code>sendTransaction</code> ch\u1EC9 ch\u1ECBu tr\xE1ch nhi\u1EC7m cho vi\u1EC7c trung chuy\u1EC3n t\u1EEB ng\u01B0\u1EDDi d\xF9ng \u0111\u1EBFn m\u1ED9t n\u1ED1t RPC. N\xEAys n\u1ED1t \u0111\xF3 nh\u1EADn \u0111\u01B0\u1EE3c Transaction, <code>sendTransaction</code> s\u1EBD tr\u1EA3 v\u1EC1 id c\u1EE7a Transaction v\xE0 c\xF3 th\u1EC3 d\xF9ng n\xF3 \u0111\u1EC3 theo d\xF5i ti\u1EBFn \u0111\u1ED9 c\u1EE7a Transaction. M\u1ED9t ph\u1EA3n h\u1ED3i th\xE0nh c\xF4ng t\u1EEB RPC kh\xF4ng \u0111\u1ED3ng ngh\u0129a v\u1EDBi vi\u1EC7c Transaction \u0111\xF3 \u0111\xE3 \u0111\u01B0\u1EE3c ti\u1EBFp nh\u1EADn, x\u1EED l\xFD v\xE0 \u0111\xF3ng v\xE0o m\u1ED9t block tr\xEAn m\u1EA1ng l\u01B0\u1EDBi Solana.</p>',10),$n={class:"custom-container tip"},nt=n("p",{class:"custom-container-title"},"TIP",-1),tt=n("h4",{id:"tham-so-cua-request",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tham-so-cua-request","aria-hidden":"true"},"#"),t(" Tham s\u1ED1 c\u1EE7a Request")],-1),st=n("li",null,[n("code",null,"transaction"),t(": "),n("code",null,"string"),t(" - Transaction \u0111\xE3 \u0111\u01B0\u1EE3c k\xFD d\u1EA7y \u0111\u1EE7 v\xE0 \u0111\u01B0\u1EE3c m\xE3 ho\xE1 l\u1EA1i th\xE0nh chu\u1ED7i k\xFD t\u1EF1")],-1),at=t("(optional) "),ot=n("code",null,"configuration object",-1),ct=t(": "),et=n("code",null,"object",-1),it=n("li",null,[n("code",null,"skipPreflight"),t(": "),n("code",null,"boolean"),t(" - N\u1EBFu "),n("code",null,"true"),t(", b\u1ECF qua qu\xE1 tr\xECnh ki\u1EC3m tra Transaction b\u1EB1ng preflight (M\u1EB7c \u0111\u1ECBnh: "),n("code",null,"false"),t(")")],-1),rt=t("(optional) "),lt=n("code",null,"preflightCommitment",-1),ht=t(": "),pt=n("code",null,"string",-1),ut=t(" - C\u1EA5p \u0111\u1ED9 "),dt={href:"https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment",target:"_blank",rel:"noopener noreferrer"},gt=t("Commitment"),kt=t(' \u0111\u01B0\u1EE3c d\xF9ng cho m\xF4 ph\u1ECFng preflight trong ng\xE2n h\xE0ng ch\u1ED7 tr\u1ED1ng (M\u1EB7c \u0111\u1ECBnh: "finalized").'),_t=n("li",null,[t("(optional) "),n("code",null,"encoding"),t(": "),n("code",null,"string"),t(' - M\xE3 ho\xE1 \u0111\u01B0\u1EE3c d\xF9ng cho d\u1EEF li\u1EC7u trong Transaction. Ho\u1EB7c "base58" (ch\u1EADm), ho\u1EB7c "base64". (M\u1EB7c \u0111\u1ECBnh: "base58").')],-1),bt=n("li",null,[t("(optional) "),n("code",null,"maxRetries"),t(": "),n("code",null,"usize"),t(" - S\u1ED1 l\u01B0\u1EE3ng t\u1ED1i \u0111a l\u1EA7n th\u1EED l\u1EA1i cho n\u1ED1t RPC g\u1EEDi Transaction \u0111\u1EBFn c\xE1c leader. N\u1EBFu tham s\u1ED1 n\xE0y kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC1 c\u1EADp, n\u1ED1t RPC s\u1EBD th\u1EED l\u1EA1i cho \u0111\u1EBFn khi Transaction th\xE0nh c\xF4ng ho\u1EB7c blockhash b\u1ECB h\u1EBFt h\u1EA1n.")],-1),mt=n("h4",{id:"response",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#response","aria-hidden":"true"},"#"),t(" Response")],-1),ft=n("code",null,"transaction id",-1),yt=t(": "),vt=n("code",null,"string",-1),Tt=t(" - Ch\u1EEF k\xFD \u0111\u1EA7u ti\xEAn \u0111\u01B0\u1EE3c nh\xFAng v\xE0o trong Transaction. Id c\u1EE7a transaction c\xF3 th\u1EC3 d\u01B0\u1EE3c d\xF9ng v\u1EDBi "),wt={href:"https://docs.solana.com/developing/clients/jsonrpc-api#getsignaturestatuses",target:"_blank",rel:"noopener noreferrer"},xt=t("getSignatureStatuses"),Pt=t(" \u0111\u1EC3 c\u1EADp nh\u1EADt tr\u1EA1ng th\xE1i m\u1EDBi nh\u1EA5t c\u1EE7a Transaction."),Ct=n("h2",{id:"tuy-chinh-thuat-toan-lan-truyen",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#tuy-chinh-thuat-toan-lan-truyen","aria-hidden":"true"},"#"),t(" Tu\u1EF3 ch\u1EC9nh thu\u1EADt to\xE1n lan truy\u1EC1n")],-1),Rt=t("\u0110\u1EC3 ph\xE1t tri\u1EC3n thu\u1EADt to\xE1n lan truy\u1EC1n c\u1EE7a ri\xEAng m\xECnh, l\u1EADp tr\xECnh vi\xEAn c\u1EA7n hi\u1EC3u r\xF5 tham s\u1ED1 "),Lt=n("code",null,"maxRetries",-1),St=t(" trong "),Bt=n("code",null,"sendTransaction",-1),qt=t(". N\u1EBFu \u0111\u01B0\u1EE3c khai b\xE1o, "),Nt=n("code",null,"maxRetries",-1),Kt=t(" s\u1EBD ghi \u0111\xE8 l\xEAn gi\xE1 tr\u1ECB m\u1EB7c \u0111\u1ECBnh c\u1EE7a n\u1ED1t RPC v\xE0 cho ph\xE9p l\u1EADp tr\xECnh vi\xEAn \u0111i\u1EC1u khi\u1EC3n th\u1EED c\xF4ng qu\xE1 tr\xECnh th\u1EED l\u1EA1i trong "),Mt={href:"https://github.com/solana-labs/solana/blob/98707baec2385a4f7114d2167ef6dfb1406f954f/validator/src/main.rs#L1258-L1274",target:"_blank",rel:"noopener noreferrer"},jt=t("ph\u1EA1m vi gi\u1EDBi h\u1EA1n h\u1EE3p l\xFD"),Ht=t("."),Vt=t("M\u1ED9t c\xE0i \u0111\u1EB7t ph\u1ED5 bi\u1EBFn cho vi\u1EC7c th\u1EED l\u1EA1i th\u1EE7 c\xF4ng l\xE0 t\u1EA1m l\u01B0u "),Ut=n("code",null,"lastValidBlockHeight",-1),At=t(" \u0111\u01B0\u1EE3c truy v\u1EA5n t\u1EEB "),Dt={href:"https://docs.solana.com/developing/clients/jsonrpc-api#getlatestblockhash",target:"_blank",rel:"noopener noreferrer"},Ft=t("getLatestBlockhash"),Et=t(". Sau khi l\u01B0u l\u1EA1i, m\u1ED9t \u1EE9ng d\u1EE5ng c\xF3 th\u1EC3 "),Jt={href:"https://docs.solana.com/developing/clients/jsonrpc-api#getblockheight",target:"_blank",rel:"noopener noreferrer"},Ot=t("theo d\xF5i blockheight c\u1EE7a m\u1EA1ng l\u01B0\u1EDBi"),It=t(" v\xE0 lan truy\u1EC1n Transaction th\u1EE7 c\xF4ng th\xF4ng qua thu\u1EADt to\xE1n tu\u1EF3 ch\u1EC9nh. C\xF3 m\u1ED9t v\xE0i \u1EE9ng d\u1EE5ng s\u1EED d\u1EE5ng gi\u1EA3i thu\u1EADt "),zt={href:"https://en.wikipedia.org/wiki/Exponential_backoff",target:"_blank",rel:"noopener noreferrer"},Gt=t("exponential backoff"),Xt=t(", th\xEC m\u1ED9t v\xE0i \u1EE9ng d\u1EE5ng kh\xE1c v\xED nh\u01B0 "),Wt={href:"https://www.mango.markets/",target:"_blank",rel:"noopener noreferrer"},Yt=t("Mango"),Qt=t(" ch\u1ECDn "),Zt={href:"https://github.com/blockworks-foundation/mango-ui/blob/b6abfc6c13b71fc17ebbe766f50b8215fa1ec54f/src/utils/send.tsx#L713",target:"_blank",rel:"noopener noreferrer"},$t=t("li\xEAn t\u1EE5c t\xE1i g\u1EEDi"),ns=t(" Transaction v\u1EDBi m\u1ED9t kho\u1EA3ng th\u1EDDi gian l\u1EB7p \u0111\u1ECBnh tr\u01B0\u1EDBc cho \u0111\u1EBFn khi qu\xE1 h\u1EA1n."),ts=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"import"),t(),n("span",{class:"token punctuation"},"{"),t(`
  Keypair`),n("span",{class:"token punctuation"},","),t(`
  Connection`),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),n("span",{class:"token punctuation"},","),t(`
  SystemProgram`),n("span",{class:"token punctuation"},","),t(`
  Transaction`),n("span",{class:"token punctuation"},","),t(`
`),n("span",{class:"token punctuation"},"}"),t(),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},'"@solana/web3.js"'),n("span",{class:"token punctuation"},";"),t(`
`),n("span",{class:"token keyword"},"import"),t(),n("span",{class:"token operator"},"*"),t(),n("span",{class:"token keyword"},"as"),t(" nacl "),n("span",{class:"token keyword"},"from"),t(),n("span",{class:"token string"},'"tweetnacl"'),n("span",{class:"token punctuation"},";"),t(`

`),n("span",{class:"token keyword"},"const"),t(),n("span",{class:"token function-variable function"},"sleep"),t(),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"async"),t(),n("span",{class:"token punctuation"},"("),t("ms"),n("span",{class:"token operator"},":"),t(),n("span",{class:"token builtin"},"number"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token keyword"},"return"),t(),n("span",{class:"token keyword"},"new"),t(),n("span",{class:"token class-name"},[n("span",{class:"token builtin"},"Promise")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),t("r"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token function"},"setTimeout"),n("span",{class:"token punctuation"},"("),t("r"),n("span",{class:"token punctuation"},","),t(" ms"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),t(`

`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"async"),t(),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token operator"},"=>"),t(),n("span",{class:"token punctuation"},"{"),t(`
  `),n("span",{class:"token keyword"},"const"),t(" payer "),n("span",{class:"token operator"},"="),t(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token keyword"},"const"),t(" toAccount "),n("span",{class:"token operator"},"="),t(" Keypair"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"generate"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),t("publicKey"),n("span",{class:"token punctuation"},";"),t(`

  `),n("span",{class:"token keyword"},"const"),t(" connection "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"new"),t(),n("span",{class:"token class-name"},"Connection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"http://127.0.0.1:8899"'),n("span",{class:"token punctuation"},","),t(),n("span",{class:"token string"},'"confirmed"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`

  `),n("span",{class:"token keyword"},"const"),t(" airdropSignature "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"await"),t(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"requestAirdrop"),n("span",{class:"token punctuation"},"("),t(`
    payer`),n("span",{class:"token punctuation"},"."),t("publicKey"),n("span",{class:"token punctuation"},","),t(`
    `),n("span",{class:"token constant"},"LAMPORTS_PER_SOL"),t(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`

  `),n("span",{class:"token keyword"},"await"),t(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirmTransaction"),n("span",{class:"token punctuation"},"("),t("airdropSignature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`

  `),n("span",{class:"token keyword"},"const"),t(" blockhashResponse "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"await"),t(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getLatestBlockhashAndContext"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token keyword"},"const"),t(" lastValidBlockHeight "),n("span",{class:"token operator"},"="),t(" blockhashResponse"),n("span",{class:"token punctuation"},"."),t("context"),n("span",{class:"token punctuation"},"."),t("slot "),n("span",{class:"token operator"},"+"),t(),n("span",{class:"token number"},"150"),n("span",{class:"token punctuation"},";"),t(`

  `),n("span",{class:"token keyword"},"const"),t(" transaction "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"new"),t(),n("span",{class:"token class-name"},"Transaction"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),t(`
    feePayer`),n("span",{class:"token operator"},":"),t(" payer"),n("span",{class:"token punctuation"},"."),t("publicKey"),n("span",{class:"token punctuation"},","),t(`
    blockhash`),n("span",{class:"token operator"},":"),t(" blockhashResponse"),n("span",{class:"token punctuation"},"."),t("value"),n("span",{class:"token punctuation"},"."),t("blockhash"),n("span",{class:"token punctuation"},","),t(`
    lastValidBlockHeight`),n("span",{class:"token operator"},":"),t(" lastValidBlockHeight"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),t(`
    SystemProgram`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"transfer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),t(`
      fromPubkey`),n("span",{class:"token operator"},":"),t(" payer"),n("span",{class:"token punctuation"},"."),t("publicKey"),n("span",{class:"token punctuation"},","),t(`
      toPubkey`),n("span",{class:"token operator"},":"),t(" toAccount"),n("span",{class:"token punctuation"},","),t(`
      lamports`),n("span",{class:"token operator"},":"),t(),n("span",{class:"token number"},"1000000"),n("span",{class:"token punctuation"},","),t(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),t(`
  `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token keyword"},"const"),t(" message "),n("span",{class:"token operator"},"="),t(" transaction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serializeMessage"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token keyword"},"const"),t(" signature "),n("span",{class:"token operator"},"="),t(" nacl"),n("span",{class:"token punctuation"},"."),t("sign"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"detached"),n("span",{class:"token punctuation"},"("),t("message"),n("span",{class:"token punctuation"},","),t(" payer"),n("span",{class:"token punctuation"},"."),t("secretKey"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  transaction`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addSignature"),n("span",{class:"token punctuation"},"("),t("payer"),n("span",{class:"token punctuation"},"."),t("publicKey"),n("span",{class:"token punctuation"},","),t(" Buffer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"from"),n("span",{class:"token punctuation"},"("),t("signature"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token keyword"},"const"),t(" rawTransaction "),n("span",{class:"token operator"},"="),t(" transaction"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"serialize"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token keyword"},"let"),t(" blockheight "),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"await"),t(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBlockHeight"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`

  `),n("span",{class:"token keyword"},"while"),t(),n("span",{class:"token punctuation"},"("),t("blockheight "),n("span",{class:"token operator"},"<"),t(" lastValidBlockHeight"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
    connection`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendRawTransaction"),n("span",{class:"token punctuation"},"("),t("rawTransaction"),n("span",{class:"token punctuation"},","),t(),n("span",{class:"token punctuation"},"{"),t(`
      skipPreflight`),n("span",{class:"token operator"},":"),t(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),t(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
    `),n("span",{class:"token keyword"},"await"),t(),n("span",{class:"token function"},"sleep"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"500"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
    blockheight `),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"await"),t(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBlockHeight"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token punctuation"},"}"),t(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br"),n("span",{class:"line-number"},"8"),n("br"),n("span",{class:"line-number"},"9"),n("br"),n("span",{class:"line-number"},"10"),n("br"),n("span",{class:"line-number"},"11"),n("br"),n("span",{class:"line-number"},"12"),n("br"),n("span",{class:"line-number"},"13"),n("br"),n("span",{class:"line-number"},"14"),n("br"),n("span",{class:"line-number"},"15"),n("br"),n("span",{class:"line-number"},"16"),n("br"),n("span",{class:"line-number"},"17"),n("br"),n("span",{class:"line-number"},"18"),n("br"),n("span",{class:"line-number"},"19"),n("br"),n("span",{class:"line-number"},"20"),n("br"),n("span",{class:"line-number"},"21"),n("br"),n("span",{class:"line-number"},"22"),n("br"),n("span",{class:"line-number"},"23"),n("br"),n("span",{class:"line-number"},"24"),n("br"),n("span",{class:"line-number"},"25"),n("br"),n("span",{class:"line-number"},"26"),n("br"),n("span",{class:"line-number"},"27"),n("br"),n("span",{class:"line-number"},"28"),n("br"),n("span",{class:"line-number"},"29"),n("br"),n("span",{class:"line-number"},"30"),n("br"),n("span",{class:"line-number"},"31"),n("br"),n("span",{class:"line-number"},"32"),n("br"),n("span",{class:"line-number"},"33"),n("br"),n("span",{class:"line-number"},"34"),n("br"),n("span",{class:"line-number"},"35"),n("br"),n("span",{class:"line-number"},"36"),n("br"),n("span",{class:"line-number"},"37"),n("br"),n("span",{class:"line-number"},"38"),n("br"),n("span",{class:"line-number"},"39"),n("br"),n("span",{class:"line-number"},"40"),n("br"),n("span",{class:"line-number"},"41"),n("br"),n("span",{class:"line-number"},"42"),n("br"),n("span",{class:"line-number"},"43"),n("br"),n("span",{class:"line-number"},"44"),n("br"),n("span",{class:"line-number"},"45"),n("br"),n("span",{class:"line-number"},"46"),n("br"),n("span",{class:"line-number"},"47"),n("br"),n("span",{class:"line-number"},"48"),n("br"),n("span",{class:"line-number"},"49"),n("br"),n("span",{class:"line-number"},"50"),n("br"),n("span",{class:"line-number"},"51"),n("br"),n("span",{class:"line-number"},"52"),n("br"),n("span",{class:"line-number"},"53"),n("br"),n("span",{class:"line-number"},"54"),n("br")])],-1),ss=n("div",{class:"language-typescript ext-ts line-numbers-mode"},[n("pre",{class:"language-typescript"},[n("code",null,[n("span",{class:"token keyword"},"while"),t(),n("span",{class:"token punctuation"},"("),t("blockheight "),n("span",{class:"token operator"},"<"),t(" lastValidBlockHeight"),n("span",{class:"token punctuation"},")"),t(),n("span",{class:"token punctuation"},"{"),t(`
  connection`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"sendRawTransaction"),n("span",{class:"token punctuation"},"("),t("rawTransaction"),n("span",{class:"token punctuation"},","),t(),n("span",{class:"token punctuation"},"{"),t(`
    skipPreflight`),n("span",{class:"token operator"},":"),t(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),t(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  `),n("span",{class:"token keyword"},"await"),t(),n("span",{class:"token function"},"sleep"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"500"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
  blockheight `),n("span",{class:"token operator"},"="),t(),n("span",{class:"token keyword"},"await"),t(" connection"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBlockHeight"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),t(`
`),n("span",{class:"token punctuation"},"}"),t(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("span",{class:"line-number"},"1"),n("br"),n("span",{class:"line-number"},"2"),n("br"),n("span",{class:"line-number"},"3"),n("br"),n("span",{class:"line-number"},"4"),n("br"),n("span",{class:"line-number"},"5"),n("br"),n("span",{class:"line-number"},"6"),n("br"),n("span",{class:"line-number"},"7"),n("br")])],-1),as=t("Khi g\u1ECDi "),os=n("code",null,"getLatestBlockhash",-1),cs=t(", \u1EE9ng d\u1EE5ng n\xEAn ch\u1EC9 r\xF5 m\u1EE9c "),es={href:"https://docs.solana.com/developing/clients/jsonrpc-api#configuring-state-commitment",target:"_blank",rel:"noopener noreferrer"},is=t("commitment"),rs=t(" mong mu\u1ED1n. B\u1EB1ng c\xE1ch \u0111\u1EB7t commitment l\xE0 "),ls=n("code",null,"confirmed",-1),hs=t(" (\u0111\xE3 \u0111\u01B0\u1EE3c b\u1ECF phi\u1EBFu ch\u1ECDn) ho\u1EB7c "),ps=n("code",null,"finalized",-1),us=t(" (~30 block sau khi "),ds=n("code",null,"confirmed",-1),gs=t("), \u1EE9ng d\u1EE5ng c\xF3 th\u1EC3 tr\xE1nh \u0111\u01B0\u1EE3c tr\u01B0\u1EDDng h\u1EE3p \u0111\u1ECDc blockhash t\u1EEB m\u1ED9t nh\xE1nh r\u1EBD thi\u1EC3u s\u1ED1."),ks=t("N\u1EBFu m\u1ED9t \u1EE9ng d\u1EE5ng truy c\u1EADp v\xE0o nh\u1EEFng n\u1ED1t RPC th\xF4ng qua m\u1ED9t m\xE1y ch\u1EE7 c\xE2n b\u1EB1ng t\u1EA3i, n\xF3 c\xF3 l\u1EF1a ch\u1ECDn c\xE1c n\u1ED1t c\u1EE5 th\u1EC3 \u0111\u1EC3 chia nh\u1ECF t\u1EA3i l\u01B0\u1EE3ng. C\xE1c n\u1ED1t RPC \u0111\xE1p \u1EE9ng c\xE1c y\xEAu c\u1EA7u thi\xEAn v\u1EC1 d\u1EEF li\u1EC7u nh\u01B0 l\xE0 "),_s=t("getProgramAccounts"),bs=t(" c\xF3 th\u1EC3 d\u1EC5 b\u1ECB qu\xE1 t\u1EA3i v\xE0 b\u1ECB \u0111\u1ED3ng b\u1ED9 ch\u1EADm, c\u0169ng nh\u01B0 l\xE0 kh\xF4ng th\xEDch h\u1EE3p cho vi\u1EC7c \u0111i\u1EC1u h\u01B0\u1EDBng Transaction. V\u1EDBi nh\u1EEFng \u1EE9ng d\u1EE5ng \u0111\xF2i h\u1ECFi th\u1EDDi gian \u0111\xE1p \u1EE9ng Transaction nhanh, n\xEAn c\xF3 m\u1ED9t m\xE1y ch\u1EE7 chuy\xEAn \u0111\u1EC3 x\u1EED l\xFD duy nh\u1EA5t cho "),ms=n("code",null,"sendTransaction",-1),fs=t("."),ys=e('<h3 id="can-nhac-khi-bo-qua-preflight" tabindex="-1"><a class="header-anchor" href="#can-nhac-khi-bo-qua-preflight" aria-hidden="true">#</a> C\xE2n nh\u1EAFc khi b\u1ECF qua Preflight</h3><p>M\u1EB7c \u0111\u1ECBnh, <code>sendTransaction</code> s\u1EBD th\u1EF1c hi\u1EC7n preflight ki\u1EC3m tra 3 b\u01B0\u1EDBc tr\u01B0\u1EDBc khi g\u1EEDi Transaction \u0111\xF3 \u0111i. C\u1EE5 th\u1EC3, <code>sendTransaction</code> s\u1EBD:</p><ul><li>X\xE1c nh\u1EADn t\u1EA5t c\u1EA3 c\xE1c ch\u1EEF k\xFD l\xE0 h\u1EE3p l\u1EC7</li><li>Ki\u1EC3m tra blockhash \u0111\u01B0\u1EE3c tham chi\u1EBFu c\xF3 n\u1EB1m trong ph\u1EA1m vi 150 block kh\xF4ng</li><li>Ch\u1EA1y gi\u1EA3i l\u1EADp transaction trong ng\xE2n h\xE0ng ch\u1ED7 tr\u1ED1ng \u0111\u01B0\u1EE3c \u0111\u1ECBnh ngh\u0129a b\u1EDFi <code>preflightCommitment</code>.</li></ul><p>N\u1EBFu m\u1ED9t trong 3 b\u01B0\u1EDBc tr\xEAn b\u1ECB l\u1ED7i, <code>sendTransaction</code> s\u1EBD \u0111\u1EA9y ra l\u1ED7i tr\u01B0\u1EDBc khi g\u1EEDi transaction \u0111i. Ki\u1EC3m tra preflight s\u1EBD kh\xF4ng \u0111\u1EA3m b\u1EA3o c\xE1c tr\u01B0\u1EDDng h\u1EE3p m\u1EA5t transaction ho\u1EB7c l\xE0 cho ph\xE9p ng\u01B0\u1EDDi d\xF9ng x\u1EED l\xFD l\u1ED7i. Thay v\xE0o \u0111\xF3 n\xF3 \u0111\u1EA3m b\u1EA3o c\xE1c l\u1ED7i c\u01A1 b\u1EA3n s\u1EBD \u0111\u01B0\u1EE3c ki\u1EC3m tra tr\u01B0\u1EDBc v\xE0 khuy\u1EBFn kh\xEDch c\xE1c l\u1EADp tr\xECnh vi\xEAn n\xEAn gi\u1EEF n\xF3 l\u1EA1i b\u1EB1ng c\xE1ch g\xE1n <code>false</code> cho <code>skipPreflight</code>.</p><h3 id="khi-nao-nen-tai-ky-transaction" tabindex="-1"><a class="header-anchor" href="#khi-nao-nen-tai-ky-transaction" aria-hidden="true">#</a> Khi n\xE0o n\xEAn t\xE1i k\xFD transaction</h3><p>D\xF9 cho t\u1EA5t c\u1EA3 n\u1ED7 l\u1EF1c g\u1EEDi l\u1EA1i, th\xEC v\u1EABn c\xF3 m\u1ED9t x\xE1c su\u1EA5t m\xE0 ng\u01B0\u1EDDi d\xF9ng b\u1ECB y\xEAu c\u1EA7u k\xFD l\u1EA1i transaction \u0111\xF3. Tr\u01B0\u1EDBc khi t\xE1i k\xFD b\u1EA5t k\u1EF3 m\u1ED9t transaction n\xE0o, b\u1EA1n c\u1EA7n <strong>\u0111\u1EA3m b\u1EA3o r\u1EB1ng</strong> transaction tr\u01B0\u1EDBc \u0111\xF3 \u0111\xE3 h\u1EBFt h\u1EA1n \u0111\u1ED1i v\u1EDBi blockhash. N\u1EBFu transaction v\u1EABn c\xF2n hi\u1EC7u l\u1EF1c, c\u1EA3 hai transaction c\xF3 th\u1EC3 s\u1EBD \u0111\u01B0\u1EE3c x\u1EED l\xFD b\u1EDFi m\u1EA1ng l\u01B0\u1EDBi. \u0110i\u1EC1u t\u01B0\u01A1ng t\u1EF1 c\u0169ng c\xF3 th\u1EC3 x\u1EA3y ra trong tr\u01B0\u1EDDng h\u1EE3p ng\u01B0\u1EDDi d\xF9ng kh\xF4ng may g\u1EEDi 2 l\u1EA7n v\u1EDBi 2 transaction gi\u1ED1ng nhau.</p>',6),vs=t("Trong Solana, m\u1ED9t transaction \u0111\u01B0\u1EE3c xem l\xE0 \u0111\xE3 v\xF4 hi\u1EC7u ho\xE1 v\xE0 an to\xE0n khi gi\xE1 tr\u1ECB blockhash \u0111\u01B0\u1EE3c tham chi\u1EBFu \u0111\xE3 qu\xE1 h\u1EA1n so v\u1EDBi "),Ts=n("code",null,"lastValidBlock",-1),ws=t(" tr\u1EA3 v\u1EC1 t\u1EEB h\xE0m "),xs=n("code",null,"getRecentBlockhash",-1),Ps=t(". L\u1EADp tr\xECnh vi\xEAn c\xF3 th\u1EC3 ki\u1EC3m tra nhanh ch\xF3ng gi\xE1 tr\u1ECB blockhash th\xF4ng qua h\xE0m "),Cs={href:"https://docs.solana.com/developing/clients/jsonrpc-api#isblockhashvalid",target:"_blank",rel:"noopener noreferrer"},Rs=t("isBlockhashValid"),Ls=t(". M\u1ED9t khi blockhash \u0111\xE3 qu\xE1 h\u1EA1n, ng\u01B0\u1EDDi d\xF9ng c\xF3 th\u1EC3 t\xE1i k\xFD tr\xEAn gi\xE1 tr\u1ECB blockhash m\u1EDBi v\xE0 h\u1EE3p l\u1EC7."),Ss=n("h2",{id:"loi-cam-on",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#loi-cam-on","aria-hidden":"true"},"#"),t(" L\u1EDDi c\u1EA3m \u01A1n")],-1),Bs=t("R\u1EA5t c\u1EA3m \u01A1n Trent Nelson, "),qs={href:"https://twitter.com/jacobvcreech",target:"_blank",rel:"noopener noreferrer"},Ns=t("Jacob Creech"),Ks=t(", White Tiger, Le Yafo, "),Ms={href:"https://twitter.com/buffalu__",target:"_blank",rel:"noopener noreferrer"},js=t("Buffalu"),Hs=t(", v\xE0 "),Vs={href:"https://twitter.com/jito_labs",target:"_blank",rel:"noopener noreferrer"},Us=t("Jito Labs"),As=t(" v\xEC \u0111\xE3 \u0111\u1ECDc v\xE0 g\xF3p \xFD cho b\xE0i vi\u1EBFt.");function Ds(Fs,Es){const a=o("ExternalLinkIcon"),i=o("SolanaCodeGroupItem"),r=o("SolanaCodeGroup"),l=o("RouterLink");return p(),u(d,null,[y,n("p",null,[v,n("a",T,[w,s(a)]),x]),P,n("ol",null,[n("li",null,[C,n("a",R,[L,s(a)]),S]),n("li",null,[B,n("a",q,[N,s(a)])])]),K,M,j,n("p",null,[H,V,U,n("a",A,[D,s(a)]),F]),n("p",null,[E,n("a",J,[O,s(a)]),I,n("a",z,[G,s(a)]),X,n("a",W,[Y,s(a)]),Q]),n("p",null,[Z,n("a",$,[nn,s(a)]),tn]),sn,n("ul",null,[n("li",null,[n("a",an,[on,s(a)])]),n("li",null,[n("a",cn,[en,s(a)])]),n("li",null,[n("a",rn,[ln,s(a)])]),n("li",null,[n("a",hn,[pn,s(a)])]),n("li",null,[n("a",un,[dn,s(a)])])]),gn,kn,n("ul",null,[n("li",null,[n("a",_n,[bn,s(a)]),mn]),n("li",null,[n("a",fn,[yn,s(a)]),vn]),n("li",null,[n("a",Tn,[wn,s(a)]),xn])]),n("p",null,[Pn,n("a",Cn,[Rn,s(a)]),Ln]),Sn,Bn,qn,n("p",null,[Nn,n("a",Kn,[Mn,s(a)]),jn,Hn,Vn,n("a",Un,[An,s(a)]),Dn,Fn,En]),n("p",null,[Jn,n("a",On,[In,s(a)]),zn,n("a",Gn,[Xn,s(a)]),Wn,Yn,Qn]),Zn,n("div",$n,[nt,tt,n("ul",null,[st,n("li",null,[at,ot,ct,et,n("ul",null,[it,n("li",null,[rt,lt,ht,pt,ut,n("a",dt,[gt,s(a)]),kt]),_t,bt])])]),mt,n("ul",null,[n("li",null,[ft,yt,vt,Tt,n("a",wt,[xt,s(a)]),Pt])])]),Ct,n("p",null,[Rt,Lt,St,Bt,qt,Nt,Kt,n("a",Mt,[jt,s(a)]),Ht]),n("p",null,[Vt,Ut,At,n("a",Dt,[Ft,s(a)]),Et,n("a",Jt,[Ot,s(a)]),It,n("a",zt,[Gt,s(a)]),Xt,n("a",Wt,[Yt,s(a)]),Qt,n("a",Zt,[$t,s(a)]),ns]),s(r,null,{default:c(()=>[s(i,{title:"TS",active:""},{default:c(()=>[ts]),preview:c(()=>[ss]),_:1})]),_:1}),n("p",null,[as,os,cs,n("a",es,[is,s(a)]),rs,ls,hs,ps,us,ds,gs]),n("p",null,[ks,s(l,{to:"/vi/guides/get-program-accounts.html"},{default:c(()=>[_s]),_:1}),bs,ms,fs]),ys,n("p",null,[vs,Ts,ws,xs,Ps,n("a",Cs,[Rs,s(a)]),Ls]),Ss,n("p",null,[Bs,n("a",qs,[Ns,s(a)]),Ks,n("a",Ms,[js,s(a)]),Hs,n("a",Vs,[Us,s(a)]),As])],64)}var Os=h(f,[["render",Ds]]);export{Os as default};
